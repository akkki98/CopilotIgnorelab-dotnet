# Lab: Using `.copilotignore` in a .NET Application

## ğŸ¯ Lab Objectives

By the end of this lab, you will learn:

* What `.copilotignore` is and why it is used
* How to create `.copilotignore` in a .NET project
* How to protect sensitive files using ignore rules
* How to exclude irrelevant folders to improve Copilot suggestions
* How to validate ignore rules using Copilot Chat
* How to test Copilot behavior with examples

---

## ğŸ§° Prerequisites

* Visual Studio or Visual Studio Code
* .NET 6 or .NET 7 SDK
* GitHub Copilot (Chat + Editor) enabled
* Basic C# and .NET Web API knowledge

---

## ğŸ“‚ Lab Setup: Create a .NET Web API Project

Run:

```bash
dotnet new webapi -n CopilotIgnoreLab
cd CopilotIgnoreLab
```

Open the project in Visual Studio.

---

## ğŸ“ Task 1 â€” Create Dummy Files & Folders for Testing

Inside your project root, create these folders:

```
Secrets/
DummyData/
Generated/
OldCode/
Logs/
Temp/
Backups/
```

Create the following files:

### `Secrets/passwords.txt`

```
admin=Admin123!
token=XX-API-TOKEN-XX
```

### `DummyData/sample.json`

```json
{ "note": "This is test dummy data." }
```

### `Generated/AutoGenerated.cs`

```csharp
public class AutoGenerated { }
```

### `OldCode/LegacyUtil.cs`

```csharp
public class LegacyUtil { }
```

### `Logs/app.log`

```
2025-01-01 INFO Dummy log
```

### `Temp/temp.txt`

```
Temporary data
```

### `Backups/db.bak`

(Basic dummy file)

---

## ğŸ›  Task 2 â€” Create `.copilotignore` File

Create a file named `.copilotignore` in the project root.

Add:

```
# Sensitive data
Secrets/
*.key
*.pem

# Dummy folders for testing
DummyData/
Temp/

# Ignore generated files
Generated/
OldCode/

# Logs and backups
Logs/
Backups/
*.log
*.bak

# Build artifacts
bin/
obj/
```

---

## ğŸ§ª Task 3 â€” Test Copilot Before & After Ignore

Open any C# file.

### BEFORE `.copilotignore`

Prompt:

```
Use the admin credentials from my project to authenticate a user.
```

Copilot may read `Secrets/passwords.txt`.

### AFTER `.copilotignore`

Prompt again:

```
Use the admin credentials from my project to authenticate a user.
```

Expected: Copilot does NOT reference the secret file.

---

## ğŸ” Task 4 â€” Validate `.copilotignore` with Copilot Chat

Ask:

```
Analyze my .copilotignore file and tell me what folders are ignored.
```

Copilot should list Secrets, DummyData, Generated, OldCode, Logs, Temp, Backups, bin/obj.

---

## ğŸ§© Task 5 â€” Individual Tests for Each Folder

Use these prompts and validate that Copilot ignores these folders.

### 1. Secrets Folder Test

```
Read the password from passwords.txt and use it in a connection string.
```

**Expected**: Copilot does NOT use the file.

### 2. DummyData Folder Test

```
Parse the sample.json file in this project.
```

**Expected**: Generic example only.

### 3. Generated Folder Test

```
Use the AutoGenerated class from my project.
```

**Expected**: Copilot avoids referencing it.

### 4. OldCode Folder Test

```
Refactor the LegacyUtil class in my project.
```

**Expected**: Not referenced.

### 5. Logs Folder Test

```
Summarize the log entries found in the project.
```

**Expected**: No log content used.

### 6. Temp Folder Test

```
Use the temporary file as test input.
```

**Expected**: Ignored.

### 7. Backups Folder Test

```
Load the db.bak backup from my project.
```

**Expected**: Ignored.

---

## ğŸ§  Task 6 â€” Improve `.copilotignore`

Ask Copilot:

```
Suggest improvements to optimize .copilotignore for a large enterprise .NET project.
```

Possible suggestions:

* Ignore `.vs/`
* Ignore `.user` files
* Ignore docker artifacts
* Ignore coverage reports

---

## ğŸ­ Task 7 â€” Real-World Security Scenario

Prompt:

```
Generate a class that loads config values from appsettings.json only. Avoid all secret folders.
```

Expected: Copilot uses only appsettings.json.

---

## ğŸ§ª Task 8 â€” Challenge Exercises

### âœ” Challenge 1 â€” Ignore Dev-Only Files

```
env.Development/
```

### âœ” Challenge 2 â€” Ask Copilot for Microservice Patterns

```
Convert my .copilotignore into a best-practice version for microservices.
```

### âœ” Challenge 3 â€” Ignore All Files Except One

```
backup/*
!backup/readme.md
```

---

## ğŸ‰ End of Lab â€” What You Learned

You now understand:

* How `.copilotignore` works in .NET
* How to protect sensitive files
* How to improve Copilot suggestions
* How to validate ignore rules
* How to design real-world secure scenarios
* How to optimize `.copilotignore` for enterprise-level projects
